@import "tailwindcss";

@theme {
  --color-background: oklch(0.129 0.042 264.695);
  --color-foreground: oklch(0.984 0.003 247.858);
  
  --color-card: oklch(0.15 0.042 264.695);
  --color-card-foreground: oklch(0.984 0.003 247.858);
  
  --color-popover: oklch(0.15 0.042 264.695);
  --color-popover-foreground: oklch(0.984 0.003 247.858);
  
  --color-primary: oklch(0.6 0.27 255);
  --color-primary-foreground: oklch(0.984 0.003 247.858);
  
  --color-secondary: oklch(0.2 0.042 264.695);
  --color-secondary-foreground: oklch(0.984 0.003 247.858);
  
  --color-muted: oklch(0.2 0.042 264.695);
  --color-muted-foreground: oklch(0.6 0.04 256.788);
  
  --color-accent: oklch(0.6 0.27 255);
  --color-accent-foreground: oklch(0.984 0.003 247.858);
  
  --color-destructive: oklch(0.577 0.245 27.325);
  --color-destructive-foreground: oklch(0.984 0.003 247.858);
  
  --color-border: oklch(0.25 0.042 264.695);
  --color-input: oklch(0.25 0.042 264.695);
  --color-ring: oklch(0.6 0.27 255);
  
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.625rem;
  --radius-xl: 0.75rem;
}

@layer base {
  * {
    border-color: oklch(0.25 0.042 264.695);
  }
  
  body {
    background-color: oklch(0.129 0.042 264.695);
    color: oklch(0.984 0.003 247.858);
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@layer components {
  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background-color: oklch(0.129 0.042 264.695);
  }

  ::-webkit-scrollbar-thumb {
    background-color: oklch(0.2 0.042 264.695);
    border-radius: 0.375rem;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: oklch(0.3 0.042 264.695);
  }

  /* React Flow custom styles */
  .react-flow {
    background-color: oklch(0.129 0.042 264.695);
  }

  .react-flow__background {
    background-color: oklch(0.129 0.042 264.695);
  }

  .react-flow__background-pattern {
    stroke: oklch(0.2 0.042 264.695);
  }

  .react-flow__edge-path {
    stroke: oklch(0.6 0.27 255 / 0.6);
    stroke-width: 2px;
  }

  .react-flow__edge.selected .react-flow__edge-path {
    stroke: oklch(0.6 0.27 255);
    stroke-width: 2.5px;
  }

  .react-flow__handle {
    width: 10px;
    height: 10px;
    border: 2px solid oklch(0.15 0.042 264.695);
    transition: all 0.2s;
  }

  .react-flow__handle:hover {
    transform: scale(1.3);
  }

  .react-flow__handle-left {
    left: -5px;
  }

  .react-flow__handle-right {
    right: -5px;
  }

  /* Node animations */
  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 20px oklch(0.6 0.27 255 / 0.3);
    }
    50% {
      box-shadow: 0 0 30px oklch(0.6 0.27 255 / 0.6);
    }
  }

  .node-running {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* Card hover effect */
  .card-hover {
    transition: all 0.2s;
  }

  .card-hover:hover {
    box-shadow: 0 10px 15px -3px oklch(0.6 0.27 255 / 0.1);
    border-color: oklch(0.6 0.27 255 / 0.3);
    transform: translateY(-2px);
  }

  /* Gradient text */
  .gradient-text {
    background: linear-gradient(to right, oklch(0.7 0.2 255), oklch(0.7 0.2 300));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  /* Loading spinner */
  @keyframes spin-slow {
    to {
      transform: rotate(360deg);
    }
  }

  .animate-spin-slow {
    animation: spin-slow 3s linear infinite;
  }

  /* Node preview image styles */
  .node-image-preview {
    border-radius: 0.5rem;
    border: 1px solid oklch(0.25 0.042 264.695);
    overflow: hidden;
    background: linear-gradient(45deg, oklch(0.2 0.042 264.695) 25%, transparent 25%),
                linear-gradient(-45deg, oklch(0.2 0.042 264.695) 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, oklch(0.2 0.042 264.695) 75%),
                linear-gradient(-45deg, transparent 75%, oklch(0.2 0.042 264.695) 75%);
    background-size: 20px 20px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
  }

  /* Sidebar item hover */
  .sidebar-item {
    transition: all 0.2s;
  }

  .sidebar-item:hover {
    background-color: oklch(0.2 0.042 264.695 / 0.5);
    border-color: oklch(0.6 0.27 255 / 0.3);
  }

  /* Toast notifications override */
  [data-sonner-toast] {
    background-color: oklch(0.15 0.042 264.695);
    border-color: oklch(0.25 0.042 264.695);
  }

  [data-sonner-toast] [data-content] {
    color: oklch(0.984 0.003 247.858);
  }

  [data-sonner-toast][data-type="success"] {
    border-color: oklch(0.6 0.27 142 / 0.3);
  }

  [data-sonner-toast][data-type="error"] {
    border-color: oklch(0.577 0.245 27.325 / 0.3);
  }
}

/* Prevent text selection during drag */
.react-flow__nodesselection,
.react-flow__selection {
  background: oklch(0.6 0.27 255 / 0.1);
  border: 1px solid oklch(0.6 0.27 255 / 0.5);
}

/* Minimap custom colors */
.react-flow__minimap {
  background-color: oklch(0.15 0.042 264.695);
  border: 1px solid oklch(0.25 0.042 264.695);
  border-radius: 0.5rem;
}

.react-flow__minimap-node {
  fill: oklch(0.15 0.042 264.695);
  stroke: oklch(0.25 0.042 264.695);
}

/* Controls custom styling */
.react-flow__controls {
  background-color: oklch(0.15 0.042 264.695);
  border: 1px solid oklch(0.25 0.042 264.695);
  border-radius: 0.5rem;
}

.react-flow__controls-button {
  background-color: oklch(0.15 0.042 264.695);
  border-color: oklch(0.25 0.042 264.695);
  color: oklch(0.984 0.003 247.858);
}

.react-flow__controls-button:hover {
  background-color: oklch(0.2 0.042 264.695);
}

/* Disable default focus outline and add custom */
.react-flow__node:focus {
  outline: none;
}

.react-flow__node.selected {
  box-shadow: 0 0 0 2px oklch(0.6 0.27 255);
}